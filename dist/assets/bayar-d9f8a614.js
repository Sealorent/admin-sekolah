import{z as n}from"./index-dc1802bb.js";import{m as r}from"./mainRepositories-6e63ddda.js";import{m as i}from"./mainLocalStorage-6a318ee8.js";const e={data:[],success:!1,loading:!0,error:null,formData:new FormData},d=n("bayar",{state:()=>e,actions:{setFormData(t){Object.entries(t).forEach(([a,s])=>{this.formData.append(a,s)})},async listBulanan(t){try{const a=await r.getListBulanan(t);return a.data.is_correct?(this.data=a.data,this.success=!0,this.error=null,this.loading=!1):(this.data=a.data,this.success=!1,this.loading=!1,this.error=a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}},async listBebas(t){try{const a=await r.getListBebas(t);return a.data.is_correct?(this.data=a.data,this.loading=!1,this.success=!0,this.error=null):(this.data=a.data,this.success=!1,this.loading=!1,this.error=a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}},async listBayarBebas(t){try{const a=await r.getListBayarBebas(t);return a.data.is_correct?(this.data=a.data,this.loading=!1,this.success=!0,this.error=null):(this.data=a.data,this.success=!1,this.loading=!1,this.error=a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}},async listRingkasan(t){try{const a=await r.getListRingkasan(t);return a.data.is_correct?(this.data=a.data,this.success=!0,this.loading=!1):(this.data=a.data,this.success=!1,this.loading=!1,this.error=a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}},async bayarBulanan(t){var a=JSON.stringify({student_nis:i.getAuth().nis,kode_sekolah:i.getAuth().kode_sekolah,bayar:"Bayar",bulan_id:t});try{const s=await r.postBayarBulanan(a);return s.data.no_ipaymu!==""?(i.setNoIpaymu(s.data.no_ipaymu),this.success=!0,this.loading=!1,this.data=s.data.message,this.error=null):(this.data=s.data,this.success=!1,this.loading=!1,this.error=s.data.message),JSON.stringify(e)}catch(s){return this.loading=!1,this.error=s.message,JSON.stringify(e)}},async removeBulanan(t){var a=JSON.stringify({student_nis:i.getAuth().nis,kode_sekolah:i.getAuth().kode_sekolah,bayar:"Batal",bulan_id:[parseInt(t)],bebas_id:[]});console.log("remove bulanan"),console.log(a);try{const s=await r.getListRingkasan(a);return console.log("remove bulanan"),console.log(s),s.data.no_ipaymu!==""?(this.success=!0,this.loading=!1,this.data=s.data.message,this.error=null):(this.data=s.data,this.success=!1,this.loading=!1,this.error=s.data.message),JSON.stringify(e)}catch(s){return this.loading=!1,this.error=s.message,JSON.stringify(e)}},async bayarBebas(t){var a=JSON.stringify({student_nis:i.getAuth().nis,kode_sekolah:i.getAuth().kode_sekolah,bayar:"Bayar",bebas_id:t.bebas_id,bebas_nominal:t.nominal_pay});try{const s=await r.postBayarBebas(a);return console.log("bayar bebas"),console.log(s),s.data.no_ipaymu!==""?(i.setNoIpaymu(s.data.no_ipaymu),this.success=!0,this.loading=!1,this.data=s.data.message,this.error=null):(this.data=s.data,this.success=!1,this.loading=!1,this.error=s.data.message),JSON.stringify(e)}catch(s){return this.loading=!1,this.error=s.message,JSON.stringify(e)}},async removeBebas(t){var a=JSON.stringify({student_nis:i.getAuth().nis,kode_sekolah:i.getAuth().kode_sekolah,bayar:"Batal",bulan_id:[],bebas_id:[parseInt(t)]});console.log("remove bebas"),console.log(a);try{const s=await r.getListRingkasan(a);return console.log("remove bebas"),console.log(s),s.data.no_ipaymu!==""?(this.success=!0,this.loading=!1,this.data=s.data.message,this.error=null):(this.data=s.data,this.success=!1,this.loading=!1,this.error=s.data.message),JSON.stringify(e)}catch(s){return this.loading=!1,this.error=s.message,JSON.stringify(e)}},async insertIpaymuBayar(t){try{const a=await r.getListRingkasan(t);return console.log("insertIpaymu"),console.log(a),a.data.is_correct?(this.success=!0,this.loading=!1,this.data=a.data.message,this.error=null):(this.data=a.data,this.success=!1,this.loading=!1,this.error=a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}},async caraPembayaran(t){try{let a=await r.caraPembayaran(t);return console.log(a),console.log(a.data.bank),a.data.is_correct&&a.data!=" "&&a.data!=null&&a.data.bank!=null?(this.data=a.data,this.loading=!1,this.success=!0):(this.success=!1,this.data=null,this.loading=!1,this.error=a.data.bank==null||a.data.bank==" "?"Bank Masih Perbaikan":a.data.message),JSON.stringify(e)}catch(a){return this.loading=!1,this.error=a.message,JSON.stringify(e)}}}});export{d as b};
