import{B as x,r as n,o as l,c as r,a as t,b as a,F as _,u as p,y as v,t as h}from"./index-daccb512.js";import{m as w}from"./mainRepositories-3199904c.js";import{m as B}from"./mainLocalStorage-8f3300f3.js";import{B as P,a as b,A as C}from"./arrayPeriod-d5354f41.js";import{M as T}from"./MenuBottomBar-dc9051c6.js";import{q as S}from"./style-05dc6766.js";import{F}from"./dateFormat-14868802.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const f={data:[],loading:!0,error:null},H=x("transaksi",{state:()=>f,actions:{async getHistoryTransaksi(){try{let e=B.getAuth(),o=JSON.stringify({nis:e.nis,kode_sekolah:e.kode_sekolah,status:["PENDING","LUNAS","EXPIRED"]}),c=await w.historyTransaksi(o);return c.data.is_correct?(this.data=c.data,this.loading=!1):(this.loading=!1,this.error=c.data.message),JSON.stringify(f)}catch(e){return this.loading=!1,this.error=e.message,JSON.stringify(f)}}}}),D=H(),I={name:"TransaksiView",components:{ButtonFilter:P,ButtonFilterYear:b,MenuBottomBar:T,VueBottomSheet:S},data(){return{listTransaksi:[],listHistory:[],listPeriod:C.getList(),selectedPeriod:[],selesai:!1,pending:!1,title:"Semua Tahun"}},methods:{async getHistoryTransaksi(){let e=await D.getHistoryTransaksi();var o=JSON.parse(e);console.log("getHistoryTransaksi"),console.log(o),this.listTransaksi=o.data.list_transaksi,this.listHistory=o.data.history},dateFormatInd(e){return F.fullYearInd(e)},togglePending(){},toggleSelesai(){},open(){this.$refs.listPeriod.open()},close(){this.$refs.listPeriod.close()}},mounted(){this.getHistoryTransaksi()}},A={class:"flex flex-col h-100"},M={class:"bg-primaryColors top-0 w-full sticky flex flex-row items-center justify-between px-5"},V=t("p",null,null,-1),E=t("p",{class:"text-center text-white font-[500px] font-mulish py-4"},"Transaksi",-1),J={class:"flex flex-nowrap overflow-x-auto scrollbar-hidden pt-2"},L={class:"flex space-x-4"},O={class:"container"},Y={class:"pt-4"},j={class:"flex flex-row py-3 border-t-2"},R={class:"container w-20 flex items-center"},q={class:"container"},G={class:"bg-primaryColors flex bottom-0 fixed w-full"},U={class:"container"},X=t("p",{class:"text-gray-400 mb-3 font-mulish"},"Pilih Tahun Ajaran",-1),z={class:"grid grid-cols-3 gap-3 pt-4"},K={class:"flex flex-row justify-end text-end pt-10"},Q=t("button",{class:"font-mulish text-blue-500"},"Batal",-1);function W(e,o,c,Z,i,d){const m=n("font-awesome-icon"),g=n("ButtonFilterYear"),u=n("ButtonFilter"),k=n("MenuBottomBar"),y=n("vue-bottom-sheet");return l(),r("div",A,[t("header",M,[V,E,a(m,{class:"text-white",icon:"receipt",onClick:o[0]||(o[0]=s=>this.$router.push({name:"getPdf",params:{type:"kwitansi"}}))})]),t("main",null,[t("div",J,[t("div",L,[a(g,{title:i.title,value:i.selectedPeriod.length>0,onClick:d.open},null,8,["title","value","onClick"]),a(u,{title:"Selesai",value:i.selesai,onClick:d.toggleSelesai},null,8,["value","onClick"]),a(u,{title:"Menunggu Pembayaran",value:i.pending,onClick:d.togglePending},null,8,["value","onClick"])])]),t("div",O,[t("div",Y,[(l(!0),r(_,null,p(i.listHistory,s=>(l(),r("div",{class:"flex flex-col",key:s},[t("div",j,[t("div",R,[a(m,{icon:["fas","money-bill"],class:"text-primaryColors align-middle h-8"})]),t("div",q,[t("p",null,h(s["no ref"]),1),t("p",null,h(d.dateFormatInd(s.tanggal)),1)])])]))),128))])])]),t("footer",G,[a(k)]),a(y,{ref:"listPeriod"},{default:v(()=>[t("div",U,[X,t("div",z,[(l(!0),r(_,null,p(i.listPeriod,s=>(l(),r("div",{key:s},[a(u,{title:s.label,value:i.selectedPeriod!=null?i.selectedPeriod.includes(s.id):"",onClick:$=>e.setSelectedPeriod(s.id)},null,8,["title","value","onClick"])]))),128))]),t("div",K,[Q,t("button",{class:"ms-12 font-mulish text-blue-500",onClick:o[1]||(o[1]=(...s)=>e.loadData&&e.loadData(...s))},"Terapkan")])])]),_:1},512)])}const rt=N(I,[["render",W]]);export{rt as default};
