import{z as g,r as i,o,c as n,a as t,b as m,t as p,x as l,s as _,F as y}from"./index-29abdbc7.js";import{m as c}from"./mainRepositories-2fcd8aa7.js";import{m as d}from"./mainLocalStorage-6a318ee8.js";import{L as x}from"./LoadingContainer-1bb784a7.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";import"./flowbite-vue-fc332bb1.js";const r={success:!1,data:[],loading:!0,error:null},k=g("pdf",{state:()=>r,actions:{async getPdf(){try{let e=await c.getPdf(d.getAuth());return e.data.is_correct==!0?(this.success=!0,this.data=e.data.laporan,this.loading=!1,this.error=null):(this.success=!1,this.data=null,this.loading=!1,this.error="error"),JSON.stringify(r)}catch(e){return this.loading=!1,this.error=e.message,JSON.stringify(r)}},async getTagihanBulanan(){try{let e=await c.getTagihanBulananPdf(d.getAuth());return console.log("pdf"),console.log(e),e.data.is_correct==!0?(this.success=!0,this.data=e.data.link,this.loading=!1,this.error=null):(this.success=!1,this.data=null,this.loading=!1,this.error="error"),JSON.stringify(r)}catch(e){return this.loading=!1,this.error=e.message,JSON.stringify(r)}}}});const f=k(),L={name:"PdfViewer",components:{LoadingCircle:x},data(){return{file:null,message:null,set:null,isLoading:!1,route:null}},methods:{async getPDF(){this.isLoading=!0;const e=await f.getPdf(),s=JSON.parse(e);s.success?(this.isLoading=s.loading,this.file=s.data[0].detail.link):(this.message=s.error,this.isLoading=s.loading,this.$snackbar.add({type:"error",text:s.error}))},async getBulananPDF(){this.isLoading=!0;const e=await f.getTagihanBulanan();console.log(e);const s=JSON.parse(e);console.log(s),s.success?(this.isLoading=s.loading,this.file=s.data,console.log(this.file)):(this.message=s.error,this.isLoading=s.loading,this.$snackbar.add({type:"error",text:s.error}))}},mounted(){const e=this.$route.params.type;e=="kwitansi"?(this.route="transaksi",this.getPDF()):e=="bulanan"?(this.route="bayar",this.getBulananPDF()):e=="pembayaran"&&(this.route="bayar",this.getPDF())}},P={class:"flex flex-col h-screen"},b={class:"bg-primaryColors top-0 w-full sticky flex flex-row items-center justify-between px-5"},B=t("p",{class:"text-center text-white font-[500px] font-mulish py-4"},"Tagihan Bulanan",-1),S=t("p",null,null,-1),N={class:"flex-grow"},C={key:0,class:"flex h-screen items-center justify-center text-red-500 font-semibold"},F={class:"iframe-container"},v=["src"];function D(e,s,J,O,a,V){const h=i("font-awesome-icon"),u=i("LoadingCircle");return o(),n(y,null,[t("div",P,[t("header",b,[m(h,{class:"text-white",icon:"arrow-left",onClick:s[0]||(s[0]=T=>this.$router.push({name:a.route}))}),B,S]),t("main",N,[a.file==null?(o(),n("p",C,p(a.message),1)):l("",!0),t("div",F,[t("iframe",{src:a.file,frameborder:"0"},null,8,v)])])]),a.isLoading?(o(),_(u,{key:0})):l("",!0)],64)}const q=w(L,[["render",D]]);export{q as default};
