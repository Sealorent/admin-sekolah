import{z as P,r as c,o as n,c as r,s as T,x as p,a as t,b as d,t as o,F as f,q as g,u as x}from"./index-c4694308.js";import{m as j}from"./mainRepositories-374c5722.js";import{M as y}from"./mainLocalStorage-1cdc50c7.js";import{A as v}from"./arrayPeriod-595fbeb3.js";import{F as B}from"./dateFormat-14868802.js";import{a as C,B as L}from"./ButtonFilterYear-829235c6.js";import{q as F}from"./style-7dcc3b35.js";import{L as S}from"./LoadingContainer-c572b9e8.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./flowbite-vue-9c7e4af1.js";const u={data:[],loading:!0,error:null},N=P("tahfidz",{state:()=>u,actions:{async listTahfidz(s){try{let e=await j.listTahfidz(s);return e.data.is_correct==!0?(this.data=e.data.laporan,this.loading=!1,this.error=null):(this.loading=!1,this.error=e.data.laporan),JSON.stringify(u)}catch(e){return this.loading=!1,this.error=e.message,JSON.stringify(u)}}}}),H=N(),J={name:"TahfidzView",components:{ButtonFilterYear:C,VueBottomSheet:F,ButtonFilter:L,LoadingCircle:S},data(){return{listTahfidz:[],sendData:null,listPeriod:v.getList(),selectedPeriod:[],title:"Pilih Tahun",message:null,jumlahHafalan:0,arrDetail:null,isLoading:!1}},methods:{setData(){this.sendData=JSON.stringify({nis:y.getAuth().nis,kode_sekolah:y.getAuth().kode_sekolah,period_id:this.selectedPeriod==null||this.selectedPeriod<1?v.getArray():this.selectedPeriod.map(s=>parseInt(s))})},async getListTahfidz(){this.isLoading=!0;const s=await H.listTahfidz(this.sendData),e=JSON.parse(s);e.error==null?(this.isLoading=e.loading,this.listTahfidz=e.data,this.jumlahHafalan=e.data.map(h=>h.detail.jumlah_hafalan_baru).reduce((h,_)=>h+_),this.message=e.error):(this.isLoading=e.loading,this.listTahfidz=[],this.jumlahHafalan=0,this.message=e.error)},loadData(){this.setData(),this.getListTahfidz(this.sendData),this.closeFilter()},setSelectedPeriod(s){this.selectedPeriod.length<0?this.selectedPeriod.push(s):this.selectedPeriod.includes(s)?this.selectedPeriod.splice(this.selectedPeriod.indexOf(s),1):this.selectedPeriod.push(s)},detail(s){this.arrDetail=s,this.openDetail()},batal(){this.selectedPeriod=[],this.loadData()},openFilter(){this.$refs.myBottomSheet.open()},closeFilter(){this.$refs.myBottomSheet.close()},openDetail(){this.$refs.detailTahfidz.open()},closeDetail(){this.$refs.detailTahfidz.close()},formatDateInd(s){return B.fullYearInd(s)}},mounted(){this.setData(),this.getListTahfidz()}},V={class:"flex flex-col h-100"},I={class:"bg-primaryColors top-0 sticky w-full"},O={class:"container flex flex-row items-center justify-between"},M=t("p",{class:"text-center text-white font-[20px] font-mulish py-4"},"Tahfidz",-1),Y=t("p",null,null,-1),q={class:"flex-grow pt-4"},E={class:"container flex flex-col gap-y-5"},K={class:"flex flex-row justify-between items-center"},R=t("p",{class:"font-mulish"},"Tahun Ajaran",-1),G={class:"border-2 shadow-sm px-4 py-2"},Q=t("p",{class:"font-mulish text-[14px]"},"Jumlah Hafalan",-1),U={class:"font-mulish text-[32px]"},W={class:"flex flex-col"},X=["onClick"],Z={class:"flex flex-col"},$={class:"font-mulish"},tt={class:"font-mulish"},et={class:"flex items-center"},st={class:"font-mulish text-green-500"},at={class:"flex items-center justify-center"},it={class:"container"},ot=t("p",{class:"text-gray-400 mb-3 font-mulish"},"Pilih Tahun Ajaran",-1),lt={class:"grid grid-cols-3 gap-3 pt-4"},nt={class:"flex flex-row justify-end text-end pt-10"},rt={key:0,class:"container"},ct={class:"flex flex-col"},dt={class:"mb-3"},ht=t("p",{class:"font-mulish uppercase text-gray-500"},"Keterangan",-1),ft={class:"font-mulish capitalize"},ut={class:"mb-3"},_t=t("p",{class:"font-mulish uppercase text-gray-500"},"Jumlah Hafalan",-1),mt={class:"font-mulish"},pt={class:"mb-3"},gt=t("p",{class:"font-mulish uppercase text-gray-500"},"Tanggal",-1),xt={class:"font-mulish"},yt={class:"mb-3"},vt=t("p",{class:"font-mulish uppercase text-gray-500"},"Murojaah",-1),bt={class:"font-mulish"},Dt={class:"mb-3"},kt=t("p",{class:"font-mulish uppercase text-gray-500"},"Murotal",-1),wt={class:"font-mulish"};function zt(s,e,h,_,a,l){const b=c("LoadingCircle"),D=c("font-awesome-icon"),k=c("ButtonFilterYear"),w=c("ButtonFilter"),m=c("vue-bottom-sheet");return n(),r(f,null,[a.isLoading?(n(),T(b,{key:0})):p("",!0),t("div",V,[t("header",I,[t("div",O,[d(D,{class:"text-white",icon:"arrow-left",onClick:e[0]||(e[0]=i=>this.$router.push({name:"home"}))}),M,Y])]),t("main",q,[t("div",E,[t("div",K,[R,d(k,{title:a.title,value:a.selectedPeriod.length>0,onClick:l.openFilter},null,8,["title","value","onClick"])]),t("div",G,[Q,t("p",U,o(a.jumlahHafalan),1)]),t("div",W,[(n(!0),r(f,null,g(a.listTahfidz,i=>(n(),r("div",{class:"flex flex-row justify-between border-t-2 w-full",key:i,onClick:z=>l.detail(i)},[t("div",Z,[t("p",$,o(i.detail.murojaah_hafalan_baru),1),t("p",tt,o(l.formatDateInd(i.tanggal)),1)]),t("div",et,[t("p",st,o(i.detail.jumlah_hafalan_baru),1)])],8,X))),128)),t("div",at,o(a.message),1)])])])]),d(m,{ref:"myBottomSheet"},{default:x(()=>[t("div",it,[ot,t("div",lt,[(n(!0),r(f,null,g(a.listPeriod,i=>(n(),r("div",{key:i},[d(w,{title:i.label,value:a.selectedPeriod!=null?a.selectedPeriod.includes(i.id):"",onClick:z=>l.setSelectedPeriod(i.id)},null,8,["title","value","onClick"])]))),128))]),t("div",nt,[t("button",{class:"font-mulish text-blue-500",onClick:e[1]||(e[1]=(...i)=>l.batal&&l.batal(...i))},"Batal"),t("button",{class:"ms-12 font-mulish text-blue-500",onClick:e[2]||(e[2]=(...i)=>l.loadData&&l.loadData(...i))},"Terapkan")])])]),_:1},512),d(m,{ref:"detailTahfidz"},{default:x(()=>[a.arrDetail!=null?(n(),r("div",rt,[t("div",ct,[t("div",dt,[ht,t("p",ft,o(a.arrDetail.detail.keterangan_hafalan_baru),1)]),t("div",ut,[_t,t("p",mt,o(a.arrDetail.detail.jumlah_hafalan_baru),1)]),t("div",pt,[gt,t("p",xt,o(s.changeDate(a.arrDetail.tanggal)),1)]),t("div",yt,[vt,t("p",bt,o(a.arrDetail.detail.murojaah),1)]),t("div",Dt,[kt,t("p",wt,o(a.arrDetail.detail.murojaah_hafalan_baru),1)])])])):p("",!0)]),_:1},512)],64)}const Ht=A(J,[["render",zt]]);export{Ht as default};
