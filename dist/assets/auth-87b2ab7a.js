import{z as o}from"./index-c4694308.js";import{m as e}from"./mainRepositories-374c5722.js";import{M as s}from"./mainLocalStorage-1cdc50c7.js";const a={user:[],loading:!0,error:null,formData:new FormData},g=o("auth",{state:()=>a,actions:{setFormData(r){Object.entries(r).forEach(([t,i])=>{this.formData.append(t,i)})},async login(r){this.setFormData(r);try{this.profil(r),this.period(r);let t=await e.login(this.formData);return t.data.is_correct?(this.user=t.data,this.loading=!1,s.setSessionLogin(r,t.data)):(this.loading=!1,this.error=t.data.message),JSON.stringify(a)}catch(t){return this.loading=!1,this.error=t.message,JSON.stringify(a)}},async profil(r){try{let t=await e.profil(r);return t.data.is_correct?(this.loading=!1,console.log(t.data),this.user=t.data,s.setProfil(t.data)):(this.loading=!1,this.error=t.data.message),JSON.stringify(a)}catch(t){return this.loading=!1,this.error=t.message,JSON.stringify(a)}},async period(r){try{let t=await e.period(r);return t.data.is_correct?(this.loading=!1,s.setPeriod(t.data.Tahunajaran)):(this.loading=!1,this.error=t.data.message),JSON.stringify(a)}catch(t){return this.loading=!1,this.error=t.message,JSON.stringify(a)}},logout(){s.logOut()}}});export{g as a};
